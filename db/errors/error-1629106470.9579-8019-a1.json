{
  "action": "design",
  "controller": "designs",
  "rails_env": "production",
  "request_id": "P-R.231-0-8019-1629106470.651",
  "environment_variables": "CLUSTERID: R.231\nCONTENT_LENGTH: \nDOCUMENT_ROOT: /app/vol/pikicentral/running/public\nHTTP_ACCEPT: */*\nHTTP_ACCEPT_ENCODING: deflate, gzip, br\nHTTP_CONNECTION: close\nHTTP_HOST: roc.samedaycustom.com\nHTTP_SITE_VERSION: stable\nHTTP_USER_AGENT: Mozilla/5.0 (compatible; AhrefsBot/7.0; +http://ahrefs.com/robot/)\nHTTP_X_CONN_CCIP: \nHTTP_X_CONN_COUNT: 1\nHTTP_X_CONN_DOMAIN: roc.samedaycustom.com\nHTTP_X_CONN_FF: 54.36.148.89\nHTTP_X_CONN_RATE_DOMAIN: 2\nHTTP_X_CONN_REQ_RAILS: 40996\nHTTP_X_CONN_REQ_RATE: 4\nHTTP_X_CONN_REQ_TOTAL: 43151\nHTTP_X_CONN_SRC: 54.36.148.89\nHTTP_X_FORWARDED_FOR: 54.36.148.89\nHTTP_X_FORWARDED_HOST: roc.samedaycustom.com\nHTTP_X_FORWARDED_SERVER: l1.pikiware.com\nPASSENGER_CONNECT_PASSWORD: cRKf11MfHoVcED7caydCOutR62GSy1TKdGqFghHlHeb\nPATH_INFO: /designs/view_design/SPIDER01\nQS_AllConn: 3\nQS_ConnectionId: 16291064706513098400045\nQS_SrvConn: 3\nQUERY_STRING: c=19684662&ctype=1&d=26163711&dpage=3&f=3&pn=1\nRAILS_ENV: production\nRELEASE: stable\nREL_PREFIX: pprs\nREMOTE_ADDR: 192.168.11.227\nREMOTE_PORT: 60970\nREQUEST_METHOD: GET\nREQUEST_URI: /designs/view_design/SPIDER01?c=19684662&ctype=1&d=26163711&dpage=3&f=3&pn=1\nSCRIPT_NAME: \nSERVER_ADDR: 172.18.0.2\nSERVER_ADMIN: [no address given]\nSERVER_NAME: roc.samedaycustom.com\nSERVER_PORT: 80\nSERVER_PROTOCOL: HTTP/1.1\nSERVER_SOFTWARE: Apache/2.4.10 (Debian)\nUSING_DOCKER: 1\n_: _",
  "session_data": "{:expiry_time=>Mon Aug 16 22:34:30 +1000 2021,\n :validation_key=>\"luzastiprynuspybomykafiquacretroquogifranohivubi\",\n :d_key=>\"roc.samedaycustom.com\",\n :brand_id=>12018367,\n \"flash\"=>{},\n :afid=>30303}",
  "exception": {
    "stacktrace": "/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/utils/unseekable_socket.rb:101:in `write'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/utils/unseekable_socket.rb:101:in `write'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/actionpack-1.13.6/lib/action_controller/cgi_process.rb:206:in `out'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/rails-1.2.6/lib/dispatcher.rb:41:in `dispatch'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/classic_rails/request_handler.rb:51:in `process_request_without_gc'\n[RAILS_ROOT]/config/environment.rb:552:in `process_request'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_request_handler.rb:520:in `accept_and_process_next_request_without_gc'\n[RAILS_ROOT]/config/environment.rb:574:in `accept_and_process_next_request'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/utils.rb:470:in `safe_fork'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server.rb:357:in `__send__'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server.rb:180:in `start'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server.rb:357:in `__send__'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'\n/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/helper-scripts/passenger-spawn-server:99",
    "class": "Errno::EBADF",
    "message": "Bad file descriptor"
  },
  "priority": 5,
  "release": "stable",
  "request_log": "16/08 19:34:30.651 +0ms  Starting request P-R.231-0-8019-1629106470.651\n16/08 19:34:30.940 +289ms  Memcache.get(192.168.11.8:11211, mem-production:session:d12a58d635f4235182bc3f9f0dc2d32f)\n16/08 19:34:30.941 +290ms  Processing DesignsController#design (for 54.36.148.89 at 2021-08-16 19:34:30) [GET]\n16/08 19:34:30.941 +290ms  Session ID: d12a58d635f4235182bc3f9f0dc2d32f\n16/08 19:34:30.941 +290ms  Parameters: {\"action\"=>\"design\", \"controller\"=>\"designs\", \"dpage\"=>\"3\", \"c\"=>\"19684662\", \"ctype\"=>\"1\", \"d\"=>\"26163711\", \"f\"=>\"3\", \"name\"=>\"SPIDER01\", \"from_name\"=>true, \"pn\"=>\"1\"}\n16/08 19:34:30.941 +290ms  DbRwSplitAdapter:69830105751000:reset_write_state: chose read connection 1\n16/08 19:34:30.941 +290ms  set validation key to luzastiprynuspybomykafiquacretroquogifranohivubi\n16/08 19:34:30.941 +290ms  set_brand\n16/08 19:34:30.941 +290ms  session d_key (nil) does not match current hostname (\"roc.samedaycustom.com\")\n16/08 19:34:30.943 +292ms  CACHE.get_multi received [\"1-brand_roc.samedaycustom.com\", \"system.data-0\", \"database.degraded\", \"database.status\"] out of [\"system.data-0\", \"1-brand_roc.samedaycustom.com\", \"database.degraded\", \"database.status\"]\n16/08 19:34:30.943 +292ms  DbRwSplitAdapter:69830105751000: Set write connection to \"d1\"\n16/08 19:34:30.943 +292ms  DbRwSplitAdapter:69830105751000: Added read connection \"d2\"\n16/08 19:34:30.944 +293ms  DbRwSplitAdapter:69830105751000: Added read connection \"d3\"\n16/08 19:34:30.944 +293ms  DbRwSplitAdapter:69830105751000: Added read connection \"d4\"\n16/08 19:34:30.944 +293ms  DbRwSplitAdapter:69830105751000:reset_write_state: chose read connection 3\n16/08 19:34:30.944 +293ms  Memcache.get(192.168.11.20:11211, mem-production:1-affiliate_30303)\n16/08 19:34:30.945 +294ms  MemCache Get (0.001114)  1-affiliate_30303\n16/08 19:34:30.945 +294ms  --------------NO acc_user_id\n16/08 19:34:30.945 +294ms  Memcache.get(192.168.11.20:11211, mem-production:affiliate_trans_30303)\n16/08 19:34:30.945 +294ms  MemCache Get (0.000531)  affiliate_trans_30303\n16/08 19:34:30.946 +295ms  Memcache.get(192.168.11.20:11211, mem-production:brand_trans_12018367)\n16/08 19:34:30.946 +295ms  MemCache Get (0.000496)  brand_trans_12018367\n16/08 19:34:30.946 +295ms  Memcache.get(192.168.11.20:11211, mem-production:tv3_s_19_12018367)\n16/08 19:34:30.948 +297ms  MemCache Get (0.001733)  tv3_s_19_12018367\n16/08 19:34:30.948 +297ms  Memcache.get(192.168.11.20:11211, mem-production:affiliate_tax_30303)\n16/08 19:34:30.949 +298ms  MemCache Get (0.000644)  affiliate_tax_30303\n16/08 19:34:30.949 +298ms  Memcache.get(192.168.11.20:11211, mem-production:affiliate_type_30303)\n16/08 19:34:30.949 +298ms  MemCache Get (0.000662)  affiliate_type_30303\n16/08 19:34:30.950 +299ms  Memcache.get(192.168.11.19:11211, mem-production:lock_version_30303)\n16/08 19:34:30.950 +299ms  Memcache.get(192.168.11.19:11211, mem-production:affiliate_cat_30303)\n16/08 19:34:30.951 +300ms  MemCache Get (0.000616)  affiliate_cat_30303\n16/08 19:34:30.951 +300ms  @brand.redirect_to=\"http://www.samedaycustom.com/page/our-locations?place=Calumet%20City,IL\"\n16/08 19:34:30.951 +300ms  redirect_to: NOT A HASH\n16/08 19:34:30.951 +300ms  Redirected to http://www.samedaycustom.com/page/our-locations?place=Calumet%20City,IL\n16/08 19:34:30.951 +300ms  Filter chain halted as [#<ActionController::Filters::ClassMethods::SymbolFilter:0x7f05409e66e0 @filter=:set_brand>] returned_false.\n16/08 19:34:30.951 +300ms  Completed in 0.01037 (96 reqs/sec) | DB: 0.00000 (0%) | 302 Found [http://roc.samedaycustom.com/designs/view_design/SPIDER01?c=19684662&ctype=1&d=26163711&dpage=3&f=3&pn=1]\n16/08 19:34:30.951 +300ms  Finished DesignsController#design in 0.01052 (95 reqs/sec) | DB: 0.00000 (0%) | DCache: 0.00000 (0/0/0/0/0) (0%) | SCache: 0.00000 (0/0/0/0/0) (0%) | memcache: 0.00629,8 (59%) | I18n: 0.00000 (0) (0%) | GC: 0.00000 (0) (0%) | IC: 0 | Time: 1629106470 | 302 Found | 54.36.148.89 [http://roc.samedaycustom.com/designs/view_design/SPIDER01?c=19684662&ctype=1&d=26163711&dpage=3&f=3&pn=1]\n16/08 19:34:30.951 +300ms  Memcache.set(mem-production:session:d12a58d635f4235182bc3f9f0dc2d32f)\n16/08 19:34:30.952 +301ms  Processing DesignsController#design (for 54.36.148.89 at 2021-08-16 19:34:30) [GET]\n16/08 19:34:30.952 +301ms  Session ID: d12a58d635f4235182bc3f9f0dc2d32f\n16/08 19:34:30.952 +301ms  Parameters: {\"action\"=>\"design\", \"controller\"=>\"designs\", \"dpage\"=>\"3\", \"c\"=>\"19684662\", \"ctype\"=>\"1\", \"d\"=>\"26163711\", \"f\"=>\"3\", \"name\"=>\"SPIDER01\", \"from_name\"=>true, \"pn\"=>\"1\"}\n16/08 19:34:30.952 +301ms  Errno::EBADF (Bad file descriptor):\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/utils/unseekable_socket.rb:101:in `write'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/utils/unseekable_socket.rb:101:in `write'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/actionpack-1.13.6/lib/action_controller/cgi_process.rb:206:in `out'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/rails-1.2.6/lib/dispatcher.rb:41:in `dispatch'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/classic_rails/request_handler.rb:51:in `process_request_without_gc'\n    /config/environment.rb:552:in `process_request'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_request_handler.rb:520:in `accept_and_process_next_request_without_gc'\n    /config/environment.rb:574:in `accept_and_process_next_request'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/classic_rails/application_spawner.rb:321:in `start_request_handler'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `send'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/classic_rails/application_spawner.rb:275:in `handle_spawn_application'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/utils.rb:470:in `safe_fork'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/classic_rails/application_spawner.rb:270:in `handle_spawn_application'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server.rb:357:in `__send__'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server.rb:180:in `start'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/spawn_manager.rb:219:in `spawn_rails_application'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/spawn_manager.rb:214:in `spawn_rails_application'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server.rb:357:in `__send__'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'\n    /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.21/helper-scripts/passenger-spawn-server:99\n16/08 19:34:30.953 +302ms  rescue_action_in_public: nil\n16/08 19:34:30.953 +302ms  Rendering /app/vol/pikicentral/running/public/500.html (500 Error)\n16/08 19:34:30.953 +302ms  get_extended_error_information_from_controller\n16/08 19:34:30.953 +302ms  Bad file descriptor does not match Lock wait timeout exceeded",
  "hostname": "a1",
  "session_id": "d12a58d635f4235182bc3f9f0dc2d32f",
  "params": "{\"action\"=>\"design\", \"controller\"=>\"designs\", \"dpage\"=>\"3\", \"c\"=>\"19684662\", \"ctype\"=>\"1\", \"d\"=>\"26163711\", \"f\"=>\"3\", \"name\"=>\"SPIDER01\", \"from_name\"=>true, \"pn\"=>\"1\"}",
  "type": "auto",
  "date": "2021-08-16 19:34:30",
  "remote_ip": "54.36.148.89",
  "site_url": "http://roc.samedaycustom.com/designs/view_design/SPIDER01?c=19684662&ctype=1&d=26163711&dpage=3&f=3&pn=1",
  "title": "designs#design (Errno::EBADF) 'Bad file descriptor'"
}